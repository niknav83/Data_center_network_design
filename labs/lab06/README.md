### VxLAN. EVPN L3.

## Цель:

- Настроить Overlay на основе VxLAN EVPN для L2 связанности между клиентами


## В этой самостоятельной работе мы ожидаем, что вы самостоятельно:
  



### Описание/Пошаговая инструкция выполнения домашнего задания:



## Схема стенда 
![img_1.png](img_1.PNG)

## Таблица адресов

| Device  | Interface | IP Address   | Subnet Mask     | Default Gateway |
|---------|-----------|--------------|-----------------|-----------------|
| Spine 1 | lo        | 192.168.0.1  | 255.255.255.255 |                 |
|         | E1/1      | 192.168.1.1  | 255.255.255.252 |                 |
|         | E1/2      | 192.168.1.21 | 255.255.255.252 |                 |
|         | E1/3      | 192.168.1.33 | 255.255.255.252 |                 |
| Spine 1 | lo        | 192.168.0.2  | 255.255.255.255 |                 |
|         | E1/1      | 192.168.2.1  | 255.255.255.252 |                 |
|         | E1/2      | 192.168.2.21 | 255.255.255.252 |                 |
|         | E1/3      | 192.168.2.33 | 255.255.255.252 |                 |
| Leaf 1  | lo        | 192.168.0.11 | 255.255.255.255 |                 |
|         | lo10      | 192.168.0.111| 255.255.255.255 |                 |
|         | E1/1      | 192.168.1.2  | 255.255.255.252 |                 |
|         | E1/2      | 192.168.2.2  | 255.255.255.252 |                 |
|         | E1/3      | 192.168.10.1 | 255.255.255.0   |                 |
|         | E1/4      | 192.168.20.1 | 255.255.255.0   |                 |
| Leaf 2  | lo        | 192.168.0.12 | 255.255.255.255 |                 |
|         | lo10      | 192.168.0.112| 255.255.255.255 |                 |
|         | E1/1      | 192.168.1.22 | 255.255.255.252 |                 |
|         | E1/2      | 192.168.2.22 | 255.255.255.252 |                 |
|         | E1/3      | 192.168.10.1 | 255.255.255.252 |                 |
|         | E1/4      | 192.168.20.1 | 255.255.255.252 |                 |
| Leaf 3  | lo        | 192.168.0.13 | 255.255.255.252 |                 |
|         | lo10      | 192.168.0.113| 255.255.255.252 |                 |
|         | E1/1      | 192.168.1.34 | 255.255.255.252 |                 |
|         | E1/2      | 192.168.2.34 | 255.255.255.255 |                 |
|         | E1/3      | 192.168.10.1 | 255.255.255.0   |                 |
|         | E1/4      | 192.168.20.1 | 255.255.255.0   |                 |
| VPC1    | eth0      | 192.168.10.2 | 255.255.255.0   | 192.168.10.1    |
| VPC2    | eth0      | 192.168.20.2 | 255.255.255.0   | 192.168.20.1    |
| VPC3    | eth0      | 192.168.10.3 | 255.255.255.0   | 192.168.10.1    |
| VPC4    | eth0      | 192.168.20.3 | 255.255.255.0   | 192.168.20.1    |
| VPC5    | eth0      | 192.168.10.4 | 255.255.255.0   | 192.168.10.1    |
| VPC6    | eth0      | 192.168.20.4 | 255.255.255.0   | 192.168.20.1    |

### [Файлы конфигураций устройст и сама работа выполненная в EVE-NG ](https://github.com/niknav83/Data_center_network_design/tree/main/labs/lab06/configs)

В данной работе применялса образ nxosv9k-9500-9.3.8

Логин и пароль: admin 

## Приступаем к настрйке сети:

### Настроим интерфейсы и IP адреса на всех устройствах Underlay-сети.

<details>

<summary> Конфигурация интерфейсов для Spine-1: </summary>

```

```
</details>


<details>

<summary> Конфигурация интерфейсов для Spine-2: </summary>

```

```
</details>


<details>

<summary> Конфигурация интерфейсов для Leaf-1: </summary>

```

```
</details>


<details>

<summary> Конфигурация интерфейсов для Leaf-2: </summary>

```

```
</details>


<details>

<summary> Конфигурация интерфейсов для Leaf-3: </summary>

```

```
</details>




### Далее на всех устройствах произведем необходимые настройки.

На Nexus необходимо для начала включить функции

```

```

Конфигурация для Spine-1:

```

```

 Конфигурация для Spine-2:

```

```

 Конфигурация для Leaf-1:

```

```

 Конфигурация для Leaf-2:

```

```

 Конфигурация для Leaf-3:

```

```

### Проверка работоспособности EVPN / VxLAN. Проверяем соседство по L2VPN между устройствами и таблицу маршрутизации Route Distinguisher. На LEAF-коммутаторах проверяем также NVE Peers:


<details>
  
<summary>Вывод команды :</summary>

Spine-1

```

```
```


```

Spine-2

```

```
```


```

Leaf-1

```


```
```


```

Leaf-2

```

```
```

```

Leaf-3

```

```
```

```

</details>



